# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API - FastAPI Library

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤—Å–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∏ –∑–∞–º–µ—Ç–∫–∞–º–∏.

## üîë –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:8000
```

## üìù API –ó–∞–º–µ—Ç–æ–∫ (Notes)

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

- **–ú–µ—Ç–æ–¥**: `POST /notes/`
- **–°—Ç–∞—Ç—É—Å**: 201 Created
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "note": "–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏ (–¥–æ 120 —Å–∏–º–≤–æ–ª–æ–≤)",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ (–¥–æ 1024 —Å–∏–º–≤–æ–ª–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
}
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST http://localhost:8000/notes/ \
  -H "Content-Type: application/json" \
  -d '{"note": "–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ", "description": "–ù–µ –∑–∞–±—ã—Ç—å –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ"}'
```

**–û—Ç–≤–µ—Ç:**

```json
{"id": 1}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫

- **–ú–µ—Ç–æ–¥**: `GET /notes/`
- **–°—Ç–∞—Ç—É—Å**: 200 OK
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X GET http://localhost:8000/notes/ | cat
```

**–û—Ç–≤–µ—Ç:**

```json
[
  {
    "id": 1,
    "note": "–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ",
    "description": "–ù–µ –∑–∞–±—ã—Ç—å –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ"
  }
]
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–º–µ—Ç–∫–∏

- **–ú–µ—Ç–æ–¥**: `GET /notes/{note_id}/`
- **–°—Ç–∞—Ç—É—Å**: 200 OK –∏–ª–∏ 404 Not Found
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–º–µ—Ç–∫–µ

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X GET http://localhost:8000/notes/1/ | cat
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "id": 1,
  "note": "–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ",
  "description": "–ù–µ –∑–∞–±—ã—Ç—å –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ"
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

- **–ú–µ—Ç–æ–¥**: `PUT /notes/{note_id}/`
- **–°—Ç–∞—Ç—É—Å**: 200 OK –∏–ª–∏ 404 Not Found
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–º–µ—Ç–∫—É

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "note": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏",
  "description": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
}
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X PUT http://localhost:8000/notes/1/ \
  -H "Content-Type: application/json" \
  -d '{"note": "–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –∏ —Ö–ª–µ–±", "description": "–î–æ–±–∞–≤–∏—Ç—å —Ö–ª–µ–± –≤ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫"}'
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

- **–ú–µ—Ç–æ–¥**: `DELETE /notes/{note_id}/`
- **–°—Ç–∞—Ç—É—Å**: 200 OK –∏–ª–∏ 404 Not Found
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–¥–∞–ª—è–µ—Ç –∑–∞–º–µ—Ç–∫—É –ø–æ ID

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X DELETE http://localhost:8000/notes/1/
```

## üìö API –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

### –ê–≤—Ç–æ—Ä—ã

#### –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞

- **–ú–µ—Ç–æ–¥**: `POST /api/library/authors/`
- **–°—Ç–∞—Ç—É—Å**: 201 Created

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "name": "–ò–º—è –∞–≤—Ç–æ—Ä–∞"
}
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST http://localhost:8000/api/library/authors/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω"}'
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–æ–≤

- **–ú–µ—Ç–æ–¥**: `GET /api/library/authors/`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `limit`, `offset` (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X GET "http://localhost:8000/api/library/authors/?limit=10&offset=0" | cat
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞ –ø–æ ID

- **–ú–µ—Ç–æ–¥**: `GET /api/library/authors/{author_id}/`

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X GET http://localhost:8000/api/library/authors/1/ | cat
```

### –ó–∞–ª—ã

#### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ª–∞

- **–ú–µ—Ç–æ–¥**: `POST /api/library/halls/`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ª–∞"
}
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST http://localhost:8000/api/library/halls/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–ß–∏—Ç–∞–ª—å–Ω—ã–π –∑–∞–ª"}'
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ª–æ–≤

- **–ú–µ—Ç–æ–¥**: `GET /api/library/halls/`

### –ö–Ω–∏–≥–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏

- **–ú–µ—Ç–æ–¥**: `POST /api/library/books/`
- **–°—Ç–∞—Ç—É—Å**: 201 Created

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",
  "hall_id": 1,
  "author_ids": [1, 2]
}
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST http://localhost:8000/api/library/books/ \
  -H "Content-Type: application/json" \
  -d '{"title": "–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω", "hall_id": 1, "author_ids": [1]}'
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–Ω–∏–≥

- **–ú–µ—Ç–æ–¥**: `GET /api/library/books/`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `limit`, `offset` (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –ø–æ ID

- **–ú–µ—Ç–æ–¥**: `GET /api/library/books/{book_id}/`

### –ß–∏—Ç–∞—Ç–µ–ª–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª—è

- **–ú–µ—Ç–æ–¥**: `POST /api/library/readers/`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "name": "–ò–º—è —á–∏—Ç–∞—Ç–µ–ª—è"
}
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST http://localhost:8000/api/library/readers/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–ü–µ—Ç—Ä –°–∏–¥–æ—Ä–æ–≤"}'
```

### –í—ã–¥–∞—á–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫–Ω–∏–≥

#### –í—ã–¥–∞—á–∞ –∫–Ω–∏–≥–∏

- **–ú–µ—Ç–æ–¥**: `POST /api/library/borrow/`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `reader_id`, `book_id`

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST "http://localhost:8000/api/library/borrow/?reader_id=1&book_id=1"
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "id": 1,
  "reader_id": 1,
  "book_id": 1,
  "borrowed_at": "2024-01-01T12:00:00",
  "returned_at": null
}
```

#### –í–æ–∑–≤—Ä–∞—Ç –∫–Ω–∏–≥–∏

- **–ú–µ—Ç–æ–¥**: `POST /api/library/return/`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `reader_id`, `book_id`

**–ü—Ä–∏–º–µ—Ä:**

```bash
curl -X POST "http://localhost:8000/api/library/return/?reader_id=1&book_id=1"
```

## üõ† –£—Ç–∏–ª–∏—Ç—ã

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤

**–°–∫—Ä–∏–ø—Ç**: `scripts/parse_logs.py`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ë–∞–∑–æ–≤—ã–π –ø–æ–¥—Å—á–µ—Ç
python scripts/parse_logs.py logfile.txt

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤—Ö–æ–∂–¥–µ–Ω–∏–π
python scripts/parse_logs.py logfile.txt --sort
```

**–§–æ—Ä–º–∞—Ç –∫–æ–¥–∞ –æ—à–∏–±–∫–∏**: –ª—é–±—ã–µ 5 –±—É–∫–≤–µ–Ω–Ω—ã—Ö –∏–ª–∏ —á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –æ—Ç–¥–µ–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª–∞–º–∏

**–ü—Ä–∏–º–µ—Ä –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:**

```
asfga asdabasdjabsf _ _ _ has3l asd has3l
```

**–í—ã–≤–æ–¥:**

```
has3l : 2
asfga : 1
```

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–∫—Ä–∏–ø—Ç**: `scripts/testNotesREST.py`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `--url`: URL API —Å–µ—Ä–≤–µ—Ä–∞
- `--ops`: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π
- `--add_ratio`: –û—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–π –∫ —É–¥–∞–ª–µ–Ω–∏—è–º (0.0-1.0)
- `--workers`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö –ø–æ—Ç–æ–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä:**

```bash
python scripts/testNotesREST.py \
  --url http://localhost:8000 \
  --ops 1000 \
  --add_ratio 0.7 \
  --workers 10
```

## ‚ö†Ô∏è –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### –û–±—â–∏–µ –æ—à–∏–±–∫–∏

- `200 OK` - –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- `201 Created` - –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
- `400 Bad Request` - –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- `404 Not Found` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500 Internal Server Error` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- `400 Book is already borrowed` - –ö–Ω–∏–≥–∞ —É–∂–µ –≤—ã–¥–∞–Ω–∞
- `400 Active borrowing not found` - –ê–∫—Ç–∏–≤–Ω–∞—è –≤—ã–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª –∑–∞–º–µ—Ç–æ–∫

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
curl -X POST http://localhost:8000/notes/ \
  -H "Content-Type: application/json" \
  -d '{"note": "–ò–∑—É—á–∏—Ç—å FastAPI", "description": "–ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é FastAPI"}'

# 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫
curl -X GET http://localhost:8000/notes/ | cat

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
curl -X PUT http://localhost:8000/notes/1/ \
  -H "Content-Type: application/json" \
  -d '{"note": "–ò–∑—É—á–∏—Ç—å FastAPI –∏ SQLAlchemy", "description": "–†–∞—Å—à–∏—Ä–∏—Ç—å –∑–Ω–∞–Ω–∏—è"}'

# 4. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
curl -X DELETE http://localhost:8000/notes/1/
```

### –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
curl -X POST http://localhost:8000/api/library/authors/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤"}'

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ª–∞
curl -X POST http://localhost:8000/api/library/halls/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞"}'

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
curl -X POST http://localhost:8000/api/library/books/ \
  -H "Content-Type: application/json" \
  -d '{"title": "–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞", "hall_id": 1, "author_ids": [1]}'

# 4. –°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª—è
curl -X POST http://localhost:8000/api/library/readers/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞"}'

# 5. –í—ã–¥–∞—á–∞ –∫–Ω–∏–≥–∏
curl -X POST "http://localhost:8000/api/library/borrow/?reader_id=1&book_id=1"

# 6. –í–æ–∑–≤—Ä–∞—Ç –∫–Ω–∏–≥–∏
curl -X POST "http://localhost:8000/api/library/return/?reader_id=1&book_id=1"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API

```bash
curl -X GET http://localhost:8000/ | cat
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger

```
http://localhost:8000/docs
```

### –°—Ö–µ–º–∞ OpenAPI

```
http://localhost:8000/openapi.json
```

---

**üìû –î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ README.md –∏–ª–∏ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç–∞.**
